<!-- <button class="home-button" [routerLink]="'/'" mat-raised-button isRoundButton="true" color="primary">
  SHOWDOWN
</button> -->

<mat-toolbar color="primary">
  <!-- <button mat-icon-button class="example-icon" aria-label="Example icon-button with menu icon">
      <mat-icon>menu</mat-icon>
    </button> -->
  <span [routerLink]="'/'" style="cursor: pointer;">Showdown</span>
  <span class="example-spacer"></span>

  <ng-container *ngIf="!isLoadingProfile">
    <!-- <button
      *ngIf="!user?._id"
      class="login-button"
      color="accent"
      isRoundButton="true"
      mat-raised-button
      (click)="login()"
    >
      Log In
      <mat-icon>login</mat-icon>
    </button> -->

    <div 
    style="cursor: pointer;"
    [matMenuTriggerFor]="menu"
    >
      {{ user?.username }}
      <button
        mat-icon-button
        aria-label="Example icon-button with a menu"
      >
        <mat-icon *ngIf="!user?._id">account_circle</mat-icon>
        <img
            *ngIf="user?._id"
            ngxGravatar
            [email]="user.username"
            size="30"
          />
      </button>
    </div>
    <mat-menu #menu="matMenu" color="accent">
      <button mat-menu-item *ngIf="user?._id" (click)="openProfile()">
        <mat-icon>account_circle</mat-icon>
        <span>Profile</span>
      </button>
      <!-- <button mat-menu-item>
          <mat-icon>local_play</mat-icon>
          <span>New Challenge</span>
        </button> -->
      <button mat-menu-item (click)="newTournament()" color="accent">
        <mat-icon>account_tree</mat-icon>
        <span>New Tournament</span>
      </button>
      <button mat-menu-item *ngIf="!user?._id" (click)="login()" color="primary">
        <mat-icon>login</mat-icon>
        <span>Log In</span>
      </button>
      <button mat-menu-item *ngIf="user?._id" (click)="logout()">
        <mat-icon>logout</mat-icon>
        <span>Logout</span>
      </button>
    </mat-menu>
  </ng-container>

  <mat-spinner
    *ngIf="isLoadingProfile"
    color="accent"
    diameter="40"
  ></mat-spinner>
</mat-toolbar>

<div class="content">
  <router-outlet></router-outlet>
</div>
