<ng-container *ngIf="this.tournament">
  <div class="admin-buttons" *ngIf="!tournament.hasStarted">
    <ng-container *ngIf="!tournament.createdBy || tournament.createdBy._id === loggedInUser?._id">
      <ng-container *ngIf="isCheckingEditAccess">
        <mat-spinner color="accent" diameter="30"></mat-spinner>
      </ng-container>
      <ng-container *ngIf="!isCheckingEditAccess">
        <button mat-raised-button color="primary" (click)="editTournament()">
          Edit
        </button>
        <button mat-raised-button color="primary" (click)="editTournament(true)">
          Run
        </button>
      </ng-container>
    </ng-container>
    

    <button
      *ngIf="
        tournament.allowRegistration &&
        this.tournament?.contestants?.length < this.tournament?.contestantCount &&
        !this.checkIfContestant()
      "
      mat-raised-button
      color="primary"
      (click)="joinClicked()"
    >
      Join
    </button>
  </div>

  <div id="tournament-name">
    <p>
      {{ this.tournament?.name }}
    </p>
  </div>

  <ng-container>
    <ng-container label="Bracket" *ngIf="viewBeingShown === 'bracket'">
      <bracket-view
        [tournament]="this.tournament"
        (showMatchDetailsEmitter)="showMatchDetails($event)"
      ></bracket-view>
    </ng-container>

    <ng-container label="Contestants" *ngIf="viewBeingShown === 'contestants'">
      <div>
        {{ this.tournament?.contestants?.length || 0 }} /
        {{ this.tournament?.contestantCount || 0 }} Contestants Registered
      </div>
      <contestant-list
        interactionMode="view"
        [contestants]="this.tournament?.contestants || []"
      ></contestant-list>
    </ng-container>

    <ng-container label="Matches" *ngIf="viewBeingShown === 'matches'">
      <match-list
        [matches]="this.appStore.getWinnersMatchContainers() | async"
        (showMatchDetailsEmitter)="showMatchDetails($event)"
      ></match-list>
    </ng-container>

    <ng-container label="Updates" *ngIf="viewBeingShown === 'updates'">
      <ng-container *ngFor="let update of tournament.updates">
        <mat-card>
          <mat-card-title>
            {{ update.title }}
          </mat-card-title>
          <mat-card-content>
            {{ update.description }}
          </mat-card-content>
          <mat-card-footer>
            {{ update.createdOn | date: 'long' }}
          </mat-card-footer>
        </mat-card>
      </ng-container>
    </ng-container>
  </ng-container>

  <mat-button-toggle-group class="action-buttons" #group="matButtonToggleGroup">
    <mat-button-toggle
    color="primary"
      value="left"
      (click)="showView('bracket')"
      aria-label="Bracket View"
    >
      <mat-icon>schema</mat-icon>
    </mat-button-toggle>
    <mat-button-toggle
      value="center"
      (click)="showView('contestants')"
      aria-label="Contestants"
    >
      <mat-icon>people</mat-icon>
    </mat-button-toggle>
    <mat-button-toggle
      value="right"
      (click)="showView('matches')"
      aria-label="Matches"
    >
      <mat-icon>format_list_numbered</mat-icon>
    </mat-button-toggle>
    <mat-button-toggle
      value="justify"
      (click)="showView('updates')"
      aria-label="Updates"
    >
      <mat-icon>subscriptions</mat-icon>
    </mat-button-toggle>
  </mat-button-toggle-group>
</ng-container>
